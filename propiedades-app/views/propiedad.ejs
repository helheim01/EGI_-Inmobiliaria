<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Detalle de Propiedad - S.A Angulo Agropecuaria e Inmobiliaria</title>

  <!-- Bootstrap 3 -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <link rel="stylesheet" href="/styles.css">
</head>
<body>
  <!-- NAVBAR -->
  <nav class="navbar navbar-default navbar-fixed-top">
    <div class="container-fluid">
      <div class="navbar-header">
        <a class="navbar-brand" href="/">
          <img src="/images/logo.gif" alt="Logo Empresa" class="logo">
          <span class="company-name">S.A Angulo Agropecuaria e Inmobiliaria</span>
        </a>
      </div>
      <ul class="nav navbar-nav navbar-right">
        <li><a href="/">Inicio</a></li>
      </ul>
    </div>
  </nav>

  <!-- CONTENIDO PRINCIPAL -->
  <div class="container detalle-propiedad" style="margin-top:70px;">
    
    <!-- ROW 1: IMAGEN Y DETALLES -->
    <div class="row">
      <!-- Imagen de la propiedad -->
      <div class="col-md-6">
        <% if (propiedad.imagenes && propiedad.imagenes.length > 0) { %>
          <div id="carouselPropiedad" class="carousel slide" data-ride="carousel">
            
            <!-- Indicadores (los puntitos debajo del carrusel) -->
            <ol class="carousel-indicators">
              <% propiedad.imagenes.forEach(function(img, index) { %>
                <li data-target="#carouselPropiedad" data-slide-to="<%= index %>" class="<%= index === 0 ? 'active' : '' %>"></li>
              <% }) %>
            </ol>

            <!-- Imágenes del carrusel -->
            <div class="carousel-inner">
              <% propiedad.imagenes.forEach(function(img, index) { %>
                <div class="item <%= index === 0 ? 'active' : '' %>">
                  <img src="<%= img.urlImagen %>" alt="Imagen <%= index + 1 %>" class="img-responsive img-detalle">
                </div>
              <% }) %>
            </div>

            <!-- Controles de navegación -->
            <a class="left carousel-control" href="#carouselPropiedad" data-slide="prev">
              <span class="glyphicon glyphicon-chevron-left"></span>
            </a>
            <a class="right carousel-control" href="#carouselPropiedad" data-slide="next">
              <span class="glyphicon glyphicon-chevron-right"></span>
            </a>

          </div>
        <% } else { %>
          <!-- Imagen por defecto si no hay ninguna -->
          <img src="/images/fallback.jpg" alt="Sin imagen disponible" class="img-responsive img-detalle">
        <% } %>
      </div>

      <!-- Información de la propiedad -->
      <div class="col-md-6">
        <h2 class="nombre-propiedad"><%= propiedad.nombre %></h2>

        <p class="descripcion-propiedad">
          <%= propiedad.descripcion %>
        </p>

        <p>
          <strong>Tipo:</strong> <%= propiedad.tipoPropiedad?.nombre || '' %><br>
          <strong>Ubicación:</strong> <%= propiedad.ubicacion?.barrio %>, <%= propiedad.ubicacion?.municipio %> - <%= propiedad.ubicacion?.provincia?.nombre %><br>
          <strong>Superficie:</strong> <%= propiedad.superficieM2 %> m²<br>
          <strong>Ambientes:</strong> <%= propiedad.ambientes %><br>
          <strong>Publicado:</strong> <%= fechaPublicacion %>
        </p>

        <!-- Mostrar ambos precios -->
        <p class="precio-detalle">
          <strong>Precio ARS:</strong> <span class="ars">ARS <%= precioBase_formatted %></span><br>
          <% if (precioUSD_formatted) { %>
            <strong>Precio USD:</strong> <span class="usd">USD <%= precioUSD_formatted %></span>
          <% } %>
        </p>
      </div>
    </div>
    <!-- FIN ROW 1 -->

    <!-- ROW 2: FORMULARIO DE CONTACTO -->
    <div class="row formulario-contacto-propiedad">
      <div class="col-md-10 col-md-offset-1">
        <div class="formulario-contacto-contenedor">
          <h3>Formulario de Contacto</h3>
          
          <form class="formulario-contacto-principal">
            <div class="form-group">
              <label for="nombre">Nombre y Apellido</label>
              <input type="text" class="form-control" id="nombre" placeholder="Ingrese su nombre completo" required>
            </div>

            <div class="form-group">
              <label for="telefono">Teléfono</label>
              <input type="tel" class="form-control" id="telefono" placeholder="Ej: +54 9 261 1234567" required>
            </div>

            <div class="form-group">
              <label for="email">Correo Electrónico</label>
              <input type="email" class="form-control" id="email" placeholder="ejemplo@email.com" required>
            </div>

            <div class="form-group">
              <label for="mensaje">Mensaje / Descripción</label>
              <textarea class="form-control" id="mensaje" rows="4" placeholder="Escriba aquí su mensaje o consulta" required></textarea>
            </div>

            <div class="form-group">
              <button type="submit" class="btn btn-primary btn-block">Enviar Consulta</button>
            </div>
          </form>
        </div>
      </div>
    </div>
    <!-- FIN ROW 2 -->

  </div>
  <!-- FIN CONTAINER -->

  <!-- FOOTER -->
  <footer class="footer">
    <div class="container">
      <div class="row">
        <!-- Mapa de Google Maps -->
        <div class="col-sm-6">
          <div class="map-container">
            <iframe
              src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3350.4835115114547!2d-68.8485867!3d-32.885382299999996!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x967e0902e2540031%3A0x617cd2d167bd9169!2sAngulo%20Innocenti%20Viticultores!5e0!3m2!1ses!2sar!4v1762354663673!5m2!1ses!2sar"
              width="100%"
              height="250"
              frameborder="0"
              style="border:0;"
              allowfullscreen>
            </iframe>
          </div>
        </div>

        <!-- Enlaces y Redes -->
        <div class="col-sm-6">
          <div class="footer-info">
            <div class="footer-links">
              <h4>Enlaces útiles</h4>
              <ul class="list-unstyled">
                <li><a href="/">Inicio</a></li>
                <li><a href="/sobre-nosotros">Sobre Nosotros</a></li>
                <li><a href="/servicios">Servicios</a></li>
                <li><a href="/contacto">Contacto</a></li>
              </ul>
              <p>©2025 ANGULO INNOCENTI. All rights reserved.</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </footer>

  <!-- Bootstrap JS -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
  <script src="/js/propiedades.js"></script>
</body>
</html>